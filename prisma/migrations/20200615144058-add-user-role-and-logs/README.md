# Migration `20200615144058-add-user-role-and-logs`

This migration has been generated by Klinton Ballecer at 6/15/2020, 2:40:58 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "Role" AS ENUM ('ADMIN', 'USER');

ALTER TABLE "public"."Log" ADD COLUMN "userId" text   ;

ALTER TABLE "public"."User" ADD COLUMN "email" text  NOT NULL ,
ADD COLUMN "password" text  NOT NULL ,
ADD COLUMN "role" "Role" NOT NULL DEFAULT 'USER';

ALTER TABLE "public"."Log" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200615142422-rename-logs-table..20200615144058-add-user-role-and-logs
--- datamodel.dml
+++ datamodel.dml
@@ -1,18 +1,27 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
 }
+enum Role {
+  ADMIN
+  USER
+}
+
 model User {
   id String @default(cuid()) @id
+  email String
+  password String
   name String
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
+  logs Log[]
+  role Role @default(USER)
 }
 model Log {
   id String @default(cuid()) @id
```


